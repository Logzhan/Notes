## PDR的优化总结

一、PDR优化效果不明显分析

​		从逻辑上来讲，PDR算法具有一定的独立位置推算能力，实际上PDR并没有非常独立的推算能力。经过分析：在卡尔曼滤波中，利用IMU + PCA计算的方向的权重非常小，所以从结果上看IMU并没有发挥其轨迹推算能力，导致PDR的效果不明显。直接调大IMU的权重，此时轨迹错乱。

二、检验PDR算法的系统效果

​		简单来说就让手机水平放置，使得AHRS算法输出的YAW是正确的，验证此时的PDR是否工作正常，发现此时的PDR依旧效果存在问题。经过LOG调试分析发现AHRS输出的AHRS的航向角是偏差90度。最终定位到AHRS算法默认采用的是北东地的坐标系，经过修改后能够输出正确的偏航角。此时增大IMU的融合权重，此时可以观察到PDR算法能够独立推导轨迹，效果一般。

三、优化GPS的噪声权重模型

四、卡尔曼模型优化

​		原版的卡尔曼滤波算法是直接融合IMU提供的方向角和GPS的方向角，在这种方式下如果磁力计受到干扰会直接导致PDR的方向出现明显偏移轨迹出错。采用的优化思路是：IMU提供角度的增量信息而不是直接提供角度。采用这种方式，整体的轨迹比较稳定。

五、性能优化	

​		原版的PDR算法采用的每次IMU更新的时候计算加速度均值的方式判断是否静止，这种方式产生的计算量太大了，没有必要。主要利用Visual Studio的性能探查器。